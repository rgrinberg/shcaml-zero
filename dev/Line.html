<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=utf8" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="IVar.html">
<link rel="next" href="LineShtream.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of class methods" rel=Appendix href="index_methods.html">
<link title="Index of class types" rel=Appendix href="index_class_types.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Abort" rel="Chapter" href="Abort.html">
<link title="Adaptor" rel="Chapter" href="Adaptor.html">
<link title="AnyShtream" rel="Chapter" href="AnyShtream.html">
<link title="AnyShtreamSig" rel="Chapter" href="AnyShtreamSig.html">
<link title="Channel" rel="Chapter" href="Channel.html">
<link title="Delimited" rel="Chapter" href="Delimited.html">
<link title="DepDAG" rel="Chapter" href="DepDAG.html">
<link title="Disposal" rel="Chapter" href="Disposal.html">
<link title="Fitting" rel="Chapter" href="Fitting.html">
<link title="FittingSig" rel="Chapter" href="FittingSig.html">
<link title="Flags" rel="Chapter" href="Flags.html">
<link title="IVar" rel="Chapter" href="IVar.html">
<link title="Line" rel="Chapter" href="Line.html">
<link title="LineShtream" rel="Chapter" href="LineShtream.html">
<link title="PriorityQueue" rel="Chapter" href="PriorityQueue.html">
<link title="Proc" rel="Chapter" href="Proc.html">
<link title="Reader" rel="Chapter" href="Reader.html">
<link title="Shtream" rel="Chapter" href="Shtream.html">
<link title="ShtreamSig" rel="Chapter" href="ShtreamSig.html">
<link title="Signal" rel="Chapter" href="Signal.html">
<link title="StringShtream" rel="Chapter" href="StringShtream.html">
<link title="Util" rel="Chapter" href="Util.html">
<link title="UsrBin" rel="Chapter" href="UsrBin.html">
<link title="Version" rel="Chapter" href="Version.html">
<link title="WeakPlus" rel="Chapter" href="WeakPlus.html"><link title="Mandatory fields" rel="Section" href="#mandatory_fields">
<link title="Line structures" rel="Section" href="#1_Linestructures">
<title>Shcaml : Line</title>
</head>
<body>
<div class="navbar"><a class="pre" href="IVar.html" title="IVar">Previous</a>
&nbsp;<a class="up" href="index.html" title="Index">Up</a>
&nbsp;<a class="post" href="LineShtream.html" title="LineShtream">Next</a>
</div>
<h1>Module <a href="type_Line.html">Line</a></h1>

<pre><span class="keyword">module</span> Line: <code class="code"><span class="keyword">sig</span></code> <a href="Line.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info module top">
Structured records for line-oriented data.
<p>

    This module defines a <a href="Line.html#TYPEt"><code class="code"><span class="constructor">Line</span>.t</code></a> type, useful to represent line-oriented data
    with structured content. A <a href="Line.html#TYPEt"><code class="code"><span class="constructor">Line</span>.t</code></a> can be thought as a (extensible)
    record, its multiple fields storing the structured data, alongside the raw
    content of the line, from which they are extracted.
<p>

    Additionnaly, a line must contain at least the following fields (see
    <a href="Line.html#mandatory_fields"><i>Mandatory fields</i></a> for more details): <code class="code">raw</code>, <code class="code">show</code>, <code class="code">source</code>,
    <code class="code">seq</code>, <code class="code">after</code> and <code class="code">before</code>.<br>
</div>
<hr width="100%">

<pre><span id="TYPElabel"><span class="keyword">type</span> <code class="type"></code>label</span> = ..</pre>
<div class="info ">
Extensible type for field labels. 
<p>

    Field identifiers, or labels, are constructors of the <a href="Line.html#TYPElabel"><code class="code"><span class="constructor">Line</span>.label</code></a> type, usually
    of arity zero. Several labels are predefined in this module, and more can be
    created by extending the <a href="Line.html#TYPElabel"><code class="code"><span class="constructor">Line</span>.label</code></a> variant type.
<p>

    For example, one can define labels <code class="code"><span class="constructor">Foo</span></code> and <code class="code"><span class="constructor">Bar</span></code> using <code class="code"><span class="keyword">type</span> label += <span class="constructor">Foo</span>
    <span class="keywordsign">|</span> <span class="constructor">Bar</span></code>.<br>
</div>


<pre><span id="VALadd_label_string"><span class="keyword">val</span> add_label_string</span> : <code class="type"><a href="Line.html#TYPElabel">label</a> -> string -> unit</code></pre><div class="info ">
When defining a new label, it is expected that a conversion to string is
    registered for it. It will be used by printers, and can be queried using
    <a href="Line.html#VALstring_of_label"><code class="code"><span class="constructor">Line</span>.string_of_label</code></a>.<br>
</div>

<pre><span id="VALstring_of_label"><span class="keyword">val</span> string_of_label</span> : <code class="type"><a href="Line.html#TYPElabel">label</a> -> string</code></pre><div class="info ">
Query the string associated with a label. Raises <code class="code"><span class="constructor">Failure</span> <span class="string">"string_of_label"</span></code>
    if such string has not been registered.<br>
</div>

<pre><span class="keyword">module</span> <a href="Line.Fields.html">Fields</a>: <code class="type">Hmap.S</code><code class="type">  with type 'a Key.info = label</code></pre><div class="info">
A heterogeneous map, with keys indexed by <a href="Line.html#TYPElabel"><code class="code"><span class="constructor">Line</span>.label</code></a>.
</div>

<pre><span id="EXCEPTIONField_not_found"><span class="keyword">exception</span> Field_not_found</span> <span class="keyword">of</span> <code class="type"><a href="Line.html#TYPElabel">label</a></code></pre>
<div class="info ">
Exception returned by <code class="code"><span class="constructor">Fields</span>.get</code> if the queried key is not bound in the
    map.<br>
</div>

<pre><span id="TYPEt"><span class="keyword">type</span> <code class="type"></code>t</span> = <code class="type">Fields.t</code> </pre>
<div class="info ">
The type of a structured line. 
<p>

    A line is a heterogeneous map, with keys indexed by <a href="Line.html#TYPElabel"><code class="code"><span class="constructor">Line</span>.label</code></a>, which must
    contain the fields described in section <a href="Line.html#mandatory_fields"><i>Mandatory fields</i></a>. 
<p>

    To create a custom line field <code class="code">foo</code>, one must first define a new label
    (<code class="code"><span class="keyword">type</span> label += <span class="constructor">Foo</span></code>), then create a corresponding map key (<code class="code"><span class="keyword">let</span> foo =
    <span class="constructor">Fields</span>.<span class="constructor">Key</span>.create <span class="constructor">Foo</span></code>).<br>
</div>


<pre><span id="VALline"><span class="keyword">val</span> line</span> : <code class="type">?after:string -> ?before:string -> string -> <a href="Line.html#TYPEt">t</a></code></pre><div class="info ">
Construct a line from a string. 
<p>

    <code class="code">after</code> is the trailing delimiter data associated with the line (default =
    <code class="code"><span class="string">"\n"</span></code>); <code class="code">before</code> is the leading delimiter data associated with the line
    (default = <code class="code"><span class="string">""</span></code>).<br>
</div>

<pre><span id="VALpp"><span class="keyword">val</span> pp</span> : <code class="type">Format.formatter -> <a href="Line.html#TYPEt">t</a> -> unit</code></pre><div class="info ">
Pretty-printer<br>
</div>
<br>
<h1 id="mandatory_fields">Mandatory fields</h1>
<p>

    In this section and the ones that follow, we define several line fields. We
    do not directly expose the <a href="Line.html#TYPElabel"><code class="code"><span class="constructor">Line</span>.label</code></a>s and <code class="code"><span class="constructor">Fields</span>.<span class="constructor">Key</span>.t</code> created, but
    instead wrapper functions (accessors, updaters).
<p>

    Fields being mandatory means that the accessors and updaters are guaranteed
    to never raise <a href="Line.html#EXCEPTIONField_not_found"><code class="code"><span class="constructor">Line</span>.<span class="constructor">Field_not_found</span></code></a>.<br>

<pre><span id="VALraw"><span class="keyword">val</span> raw</span> : <code class="type"><a href="Line.html#TYPEt">t</a> -> string</code></pre><div class="info ">
The raw string data from which a line was constructed.
<p>

    This should typically not change after a line is created; to change the
    principal string value of a line, see <a href="Line.html#VALselect"><code class="code"><span class="constructor">Line</span>.select</code></a> and <a href="Line.html#VALshow"><code class="code"><span class="constructor">Line</span>.show</code></a>. (accessor,
    required)<br>
</div>

<pre><span id="VALset_raw"><span class="keyword">val</span> set_raw</span> : <code class="type">string -> <a href="Line.html#TYPEt">t</a> -> <a href="Line.html#TYPEt">t</a></code></pre><div class="info ">
Updater for <a href="Line.html#VALraw"><code class="code"><span class="constructor">Line</span>.raw</code></a><br>
</div>

<pre><span id="VALshow"><span class="keyword">val</span> show</span> : <code class="type"><a href="Line.html#TYPEt">t</a> -> string</code></pre><div class="info ">
The principal string representation of a line.
<p>

    Unlike <a href="Line.html#VALraw"><code class="code"><span class="constructor">Line</span>.raw</code></a> above, the value of <a href="Line.html#VALshow"><code class="code"><span class="constructor">Line</span>.show</code></a> should reflect the data of concern
    in a line.  Use <a href="Line.html#VALset_show"><code class="code"><span class="constructor">Line</span>.set_show</code></a> or <a href="Line.html#VALselect"><code class="code"><span class="constructor">Line</span>.select</code></a> to change the value returned by
    <a href="Line.html#VALshow"><code class="code"><span class="constructor">Line</span>.show</code></a>.  When a line is passed to an external process, <a href="Line.html#VALshow"><code class="code"><span class="constructor">Line</span>.show</code></a> is used to
    get a string to send.<br>
</div>

<pre><span id="VALset_show"><span class="keyword">val</span> set_show</span> : <code class="type">string -> <a href="Line.html#TYPEt">t</a> -> <a href="Line.html#TYPEt">t</a></code></pre><div class="info ">
Choose the principal string value to be returned by <a href="Line.html#VALshow"><code class="code"><span class="constructor">Line</span>.show</code></a>.<br>
</div>

<pre><span id="VALselect"><span class="keyword">val</span> select</span> : <code class="type">(<a href="Line.html#TYPEt">t</a> -> string) -> <a href="Line.html#TYPEt">t</a> -> <a href="Line.html#TYPEt">t</a></code></pre><div class="info ">
Choose the principal string value, using a function.
    <code class="code"><span class="constructor">Line</span>.select sel ln</code> is equivalent to <code class="code"><span class="constructor">Line</span>.set_show (sel ln) ln</code>.<br>
</div>

<pre><span id="TYPEsource"><span class="keyword">type</span> <code class="type"></code>source</span> = <code class="type">[ `Command of string<br>       | `Directory of string<br>       | `File of string<br>       | `None<br>       | `Other of string<br>       | `Process of <a href="Proc.html#TYPEexecspec">Proc.execspec</a> ]</code> </pre>
<div class="info ">
Type for the source of a line.<br>
</div>


<pre><span id="VALsource"><span class="keyword">val</span> source</span> : <code class="type"><a href="Line.html#TYPEt">t</a> -> <a href="Line.html#TYPEsource">source</a></code></pre><div class="info ">
The source of a line. (accessor, nullable)<br>
</div>

<pre><span id="VALset_source"><span class="keyword">val</span> set_source</span> : <code class="type"><a href="Line.html#TYPEsource">source</a> -> <a href="Line.html#TYPEt">t</a> -> <a href="Line.html#TYPEt">t</a></code></pre><div class="info ">
Updater for <a href="Line.html#VALsource"><code class="code"><span class="constructor">Line</span>.source</code></a><br>
</div>

<pre><span id="VALseq"><span class="keyword">val</span> seq</span> : <code class="type"><a href="Line.html#TYPEt">t</a> -> int</code></pre><div class="info ">
The position of a line in its source. (accessor, nullable)<br>
</div>

<pre><span id="VALset_seq"><span class="keyword">val</span> set_seq</span> : <code class="type">int -> <a href="Line.html#TYPEt">t</a> -> <a href="Line.html#TYPEt">t</a></code></pre><div class="info ">
Updater for <a href="Line.html#VALseq"><code class="code"><span class="constructor">Line</span>.seq</code></a><br>
</div>

<pre><span id="VALafter"><span class="keyword">val</span> after</span> : <code class="type"><a href="Line.html#TYPEt">t</a> -> string</code></pre><div class="info ">
Trailing delimiter data associated with a line (accessor, required, default = <code class="code"><span class="string">"\n"</span></code>)<br>
</div>

<pre><span id="VALset_after"><span class="keyword">val</span> set_after</span> : <code class="type">string -> <a href="Line.html#TYPEt">t</a> -> <a href="Line.html#TYPEt">t</a></code></pre><div class="info ">
Updater for <a href="Line.html#VALafter"><code class="code"><span class="constructor">Line</span>.after</code></a><br>
</div>

<pre><span id="VALbefore"><span class="keyword">val</span> before</span> : <code class="type"><a href="Line.html#TYPEt">t</a> -> string</code></pre><div class="info ">
Leading delimiter data associated with a line (accessor, required, default = <code class="code"><span class="string">""</span></code>)<br>
</div>

<pre><span id="VALset_before"><span class="keyword">val</span> set_before</span> : <code class="type">string -> <a href="Line.html#TYPEt">t</a> -> <a href="Line.html#TYPEt">t</a></code></pre><div class="info ">
Updater for <a href="Line.html#VALbefore"><code class="code"><span class="constructor">Line</span>.before</code></a><br>
</div>
<br>
<h1 id="1_Linestructures">Line structures</h1>
<p>

    Several structures that may be read from a line. If the raw contents of a
    line matches a structure corresponding to module <code class="code"><span class="constructor">Foo</span></code>, <code class="code"><span class="constructor">Foo</span>.create</code> will
    parse it and add the corresponding fields to the line. 
<p>

    For every module below, accessors and updaters raise exception
    <a href="Line.html#EXCEPTIONField_not_found"><code class="code"><span class="constructor">Line</span>.<span class="constructor">Field_not_found</span></code></a> when the corresponding field is not present in a line.<br>

<pre><span class="keyword">module</span> <a href="Line.Key_value.html">Key_value</a>: <code class="code"><span class="keyword">sig</span></code> <a href="Line.Key_value.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info">
Line structure to represent associations of keys with values.
</div>

<pre><span class="keyword">module</span> <a href="Line.Delim.html">Delim</a>: <code class="code"><span class="keyword">sig</span></code> <a href="Line.Delim.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info">
Line structure to represent records with delimited fields.
</div>

<pre><span class="keyword">module</span> <a href="Line.Passwd.html">Passwd</a>: <code class="code"><span class="keyword">sig</span></code> <a href="Line.Passwd.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info">
Line structure for <i>/etc/passwd</i> file records.
</div>

<pre><span class="keyword">module</span> <a href="Line.Group.html">Group</a>: <code class="code"><span class="keyword">sig</span></code> <a href="Line.Group.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info">
Line structure for <i>/etc/group</i> file records.
</div>

<pre><span class="keyword">module</span> <a href="Line.Stat.html">Stat</a>: <code class="code"><span class="keyword">sig</span></code> <a href="Line.Stat.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info">
Line structure for file status and mode information.
</div>

<pre><span class="keyword">module</span> <a href="Line.Ps.html">Ps</a>: <code class="code"><span class="keyword">sig</span></code> <a href="Line.Ps.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info">
Line structure for process status information.
</div>

<pre><span class="keyword">module</span> <a href="Line.Fstab.html">Fstab</a>: <code class="code"><span class="keyword">sig</span></code> <a href="Line.Fstab.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info">
Line structure for the file system table <i>/etc/fstab</i>
    records.
</div>

<pre><span class="keyword">module</span> <a href="Line.Mailcap.html">Mailcap</a>: <code class="code"><span class="keyword">sig</span></code> <a href="Line.Mailcap.html">..</a> <code class="code"><span class="keyword">end</span></code></pre><div class="info">
Line structure for mailcap entries.
</div>
</body></html>